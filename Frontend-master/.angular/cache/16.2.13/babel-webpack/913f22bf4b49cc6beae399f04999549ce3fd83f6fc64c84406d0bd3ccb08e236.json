{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Admin } from 'src/app/services/admin.service';\nimport { Freelancer } from 'src/app/services/freelancer.service';\nimport { Recruiter } from 'src/app/services/recruiter.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/admin.service\";\nimport * as i3 from \"src/app/services/recruiter.service\";\nimport * as i4 from \"src/app/services/freelancer.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nfunction LoginComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtext(1, \" Please enter a userName. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtext(1, \" Please enter a password. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtext(1, \" Please choose a valid role. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtext(1, \" Enter a First Name. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtext(1, \" Enter a Last Name. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_87_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtext(1, \" Enter a UserName. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_93_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtext(1, \" Enter a Password. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_110_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtext(1, \" Please choose a valid role. \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"was-validated\": a0\n  };\n};\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(formBuilder, adminService, recruiterService, freelancerService, router) {\n      this.formBuilder = formBuilder;\n      this.adminService = adminService;\n      this.recruiterService = recruiterService;\n      this.freelancerService = freelancerService;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.loginForm = this.formBuilder.group({\n        loginId: ['', Validators.required],\n        role: ['', Validators.required],\n        password: ['', Validators.required]\n      });\n      this.signUpForm = this.formBuilder.group({\n        firstName: ['', Validators.required],\n        lastName: ['', Validators.required],\n        userName: ['', Validators.required],\n        password: ['', Validators.required],\n        role: ['', Validators.required]\n      });\n    }\n    onsubmit() {\n      console.log(\"Login Form Submission attempted\");\n      this.loginFormSubmitAttempt = true;\n      if (this.loginForm.valid) {\n        const role = this.loginForm.get('role').value;\n        const loginId = this.loginForm.get('loginId').value;\n        const password = this.loginForm.get('password').value;\n        // Admin Role\n        if (role === '1') {\n          this.adminService.findByName(loginId).subscribe(data => {\n            console.log(data.userName);\n            if (data.password === password) {\n              alert(\"Logged in Successfully\");\n              this.redirect(\"admin-dashboard\");\n              localStorage.setItem('loggedIn', \"true\");\n            } else {\n              alert(\"Invalid Login Details!\");\n            }\n          }, err => {\n            console.log(err);\n            if (err.status === 400) {\n              alert(err.error);\n            }\n          });\n        }\n        // Recruiter Role\n        else if (role === '2') {\n          this.recruiterService.getByName(loginId).subscribe(data => {\n            console.log(data.userName);\n            if (data.password === password) {\n              alert(\"Logged in Successfully\");\n              localStorage.setItem('recruiterUName', loginId);\n              localStorage.setItem('recruiterId', data.id);\n              this.redirect(\"recruiter-dashboard\");\n              localStorage.setItem('loggedIn', \"true\");\n            } else {\n              alert(\"Invalid Login Details!\");\n            }\n          }, err => {\n            console.log(err);\n            if (err.status === 400) {\n              alert(err.error);\n            }\n          });\n        }\n        // Freelancer Role\n        else if (role === '3' || this.role === '4') {\n          this.freelancerService.getByUserName(loginId).subscribe(data => {\n            console.log(data.userName);\n            if (data.password === password) {\n              alert(\"Logged in Successfully\");\n              localStorage.setItem('freelancerUName', loginId);\n              localStorage.setItem('freelancerId', data.id);\n              this.redirect(\"freelancer-dashboard\");\n              localStorage.setItem('loggedIn', \"true\");\n            } else {\n              alert(\"Invalid Login Details!\");\n            }\n          }, err => {\n            console.log(err);\n            if (err.status === 400) {\n              alert(err.error);\n            }\n          });\n        }\n      }\n    }\n    isSignUpFieldInvalid(field) {\n      return !this.signUpForm.get(field).valid && this.signUpForm.get(field).touched || this.signUpForm.get(field).untouched && this.signUpFormSubmitAttempt;\n    }\n    isLoginFieldInvalid(field) {\n      return !this.loginForm.get(field).valid && this.loginForm.get(field).touched || this.loginForm.get(field).untouched && this.loginFormSubmitAttempt;\n    }\n    createUser() {\n      if (this.signUpForm.valid) {\n        console.log(\"Trying to create a new user\");\n        this.role = this.signUpForm.value.role;\n        console.log(this.role);\n        if (this.role === '1') {\n          console.log(\"Creating new Admin.\");\n          this.admin = new Admin();\n          this.admin.firstName = this.signUpForm.value.firstName;\n          this.admin.lastName = this.signUpForm.value.lastName;\n          this.admin.userName = this.signUpForm.value.userName;\n          this.admin.password = this.signUpForm.value.password;\n          console.log(this.admin);\n          this.adminService.addAdmin(this.admin).subscribe(data => {\n            console.log(data);\n            window.alert(\"Signup successful. Please login.\");\n            this.router.navigate(['/login']);\n          }, err => {\n            console.log(err);\n          });\n        } else if (this.role === '2') {\n          console.log(\"Creating new Recruiter\");\n          var recruiter = new Recruiter();\n          recruiter.firstName = this.signUpForm.value.firstName;\n          recruiter.lastName = this.signUpForm.value.lastName;\n          recruiter.userName = this.signUpForm.value.userName;\n          recruiter.password = this.signUpForm.value.password;\n          console.log(recruiter);\n          this.recruiterService.addRecruiter(recruiter).subscribe(data => {\n            console.log(data);\n            window.alert(\"Signup successful. Please login.\");\n            this.router.navigate(['/login']);\n          }, err => {\n            alert(err.error);\n          });\n        } else if (this.role === '3' || this.role === '4') {\n          // Handling both Freelancer and Job Seeker\n          console.log(\"Creating new Freelancer or Job Seeker\");\n          var user = new Freelancer();\n          user.firstName = this.signUpForm.value.firstName;\n          user.lastName = this.signUpForm.value.lastName;\n          user.userName = this.signUpForm.value.userName;\n          user.password = this.signUpForm.value.password;\n          console.log(user);\n          this.freelancerService.addFreelancer(user).subscribe(data => {\n            console.log(data);\n            window.alert(\"Signup successful. Please login.\");\n            this.router.navigate(['/login']);\n          }, err => {\n            alert(err.error);\n          });\n        }\n      }\n      this.signUpFormSubmitAttempt = true;\n    }\n    redirect(role) {\n      this.router.navigate([`${role}`]);\n    }\n    static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AdminService), i0.ɵɵdirectiveInject(i3.RecruiterService), i0.ɵɵdirectiveInject(i4.FreelancerService), i0.ɵɵdirectiveInject(i5.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 130,\n      vars: 13,\n      consts: [[1, \"container-fluid\"], [1, \"row\", \"mt-5\"], [1, \"col-3\"], [1, \"col-6\", \"card\", \"shadow-lg\", \"bg-light\", \"bg-gradient\"], [1, \"form\", \"mt-3\", 3, \"formGroup\", \"ngClass\"], [1, \"mb-3\", \"form-group\"], [\"for\", \"loginId\", 1, \"form-label\"], [2, \"color\", \"red\"], [\"type\", \"text\", \"id\", \"loginId\", \"placeholder\", \"userName\", \"formControlName\", \"loginId\", \"required\", \"\", 1, \"form-control\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"passwordField\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"passwordField\", \"placeholder\", \"password\", \"formControlName\", \"password\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"userRole\"], [\"id\", \"userRole\", \"formControlName\", \"role\", \"required\", \"\", 1, \"form-select\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"value\", \"3\"], [\"value\", \"4\"], [1, \"d-grid\", \"gap-2\", \"col-6\", \"mx-auto\", \"mb-1\"], [1, \"row\"], [1, \"col\"], [1, \"col-5\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"click\"], [\"type\", \"reset\", 1, \"btn\", \"btn-dark\"], [1, \"text-center\", \"mb-3\"], [\"href\", \"#\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#signUp\"], [\"id\", \"signUp\", \"data-bs-backdrop\", \"static\", \"data-bs-keyboard\", \"false\", \"tabindex\", \"-1\", \"aria-labelledby\", \"signUpLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"signUpLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [3, \"formGroup\"], [1, \"row\", \"g-3\"], [1, \"col-md-6\"], [\"for\", \"firstName\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"firstName\", \"placeholder\", \"Mark\", \"formControlName\", \"firstName\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"lastName\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"lastName\", \"formControlName\", \"lastName\", \"placeholder\", \"Otto\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"userName\", 1, \"form-label\"], [1, \"input-group\"], [\"id\", \"inputGroupPrepend2\", 1, \"input-group-text\"], [\"type\", \"text\", \"id\", \"userName\", \"aria-describedby\", \"inputGroupPrepend2\", \"formControlName\", \"userName\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"password\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"password\", \"placeholder\", \"Password\", \"formControlName\", \"password\", \"required\", \"\", 1, \"form-control\"], [1, \"col-md-3\"], [\"for\", \"roleSelect\", 1, \"form-label\"], [\"id\", \"roleSelect\", \"formControlName\", \"role\", \"required\", \"\", 1, \"form-select\"], [\"selected\", \"\", \"disabled\", \"\", \"value\", \"\"], [1, \"col-12\"], [1, \"form-check\"], [\"type\", \"checkbox\", \"value\", \"\", \"id\", \"checkTerms\", \"required\", \"\", 1, \"form-check-input\"], [\"for\", \"checkTerms\", 1, \"form-check-label\"], [1, \"invalid-feedback\"], [1, \"row\", \"g-3\", \"mt-2\"], [1, \"col-4\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵelement(2, \"div\", 2);\n          i0.ɵɵelementStart(3, \"div\", 3)(4, \"form\", 4)(5, \"div\", 5)(6, \"b\")(7, \"label\", 6);\n          i0.ɵɵtext(8, \"UserName\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"span\", 7);\n          i0.ɵɵtext(10, \"*\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(11, \"input\", 8);\n          i0.ɵɵtemplate(12, LoginComponent_div_12_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"div\", 5)(14, \"b\")(15, \"label\", 10);\n          i0.ɵɵtext(16, \"Password\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"span\", 7);\n          i0.ɵɵtext(18, \"*\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"input\", 11);\n          i0.ɵɵtemplate(20, LoginComponent_div_20_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 5)(22, \"b\")(23, \"label\", 12);\n          i0.ɵɵtext(24, \"Select Role\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(25, \"span\", 7);\n          i0.ɵɵtext(26, \"*\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"select\", 13)(28, \"option\", 14);\n          i0.ɵɵtext(29, \"Admin\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"option\", 15);\n          i0.ɵɵtext(31, \"Recruiter\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"option\", 16);\n          i0.ɵɵtext(33, \"Freelancer\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"option\", 17);\n          i0.ɵɵtext(35, \"Job Seeker\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(36, LoginComponent_div_36_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"div\", 18)(38, \"div\", 19);\n          i0.ɵɵelement(39, \"div\", 20);\n          i0.ɵɵelementStart(40, \"div\", 21)(41, \"button\", 22);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_41_listener() {\n            return ctx.onsubmit();\n          });\n          i0.ɵɵtext(42, \"Login\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(43, \"div\", 21)(44, \"button\", 23);\n          i0.ɵɵtext(45, \"Reset\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(46, \"div\", 20);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(47, \"div\", 24)(48, \"small\");\n          i0.ɵɵtext(49, \"Not a user yet?\");\n          i0.ɵɵelementStart(50, \"span\");\n          i0.ɵɵtext(51, \" Click here to \");\n          i0.ɵɵelementStart(52, \"a\", 25);\n          i0.ɵɵtext(53, \"Sign Up\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(54, \".\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(55, \"div\")(56, \"div\", 26)(57, \"div\", 27)(58, \"div\", 28)(59, \"div\", 29)(60, \"h5\", 30);\n          i0.ɵɵtext(61, \"Sign Up\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(62, \"button\", 31);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(63, \"div\", 32)(64, \"form\", 33)(65, \"div\", 34)(66, \"div\", 35)(67, \"b\")(68, \"label\", 36);\n          i0.ɵɵtext(69, \"First name\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(70, \"input\", 37);\n          i0.ɵɵtemplate(71, LoginComponent_div_71_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(72, \"div\", 35)(73, \"b\")(74, \"label\", 38);\n          i0.ɵɵtext(75, \"Last name\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(76, \"input\", 39);\n          i0.ɵɵtemplate(77, LoginComponent_div_77_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(78, \"div\", 34)(79, \"div\", 35)(80, \"b\")(81, \"label\", 40);\n          i0.ɵɵtext(82, \"Username\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(83, \"div\", 41)(84, \"span\", 42);\n          i0.ɵɵtext(85, \"@\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(86, \"input\", 43);\n          i0.ɵɵtemplate(87, LoginComponent_div_87_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(88, \"div\", 35)(89, \"b\")(90, \"label\", 44);\n          i0.ɵɵtext(91, \"Password\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(92, \"input\", 45);\n          i0.ɵɵtemplate(93, LoginComponent_div_93_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(94, \"div\", 34)(95, \"div\", 46)(96, \"b\")(97, \"label\", 47);\n          i0.ɵɵtext(98, \"Role\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(99, \"select\", 48)(100, \"option\", 49);\n          i0.ɵɵtext(101, \"Choose Role\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(102, \"option\", 14);\n          i0.ɵɵtext(103, \"Admin\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(104, \"option\", 15);\n          i0.ɵɵtext(105, \"Recruiter\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(106, \"option\", 16);\n          i0.ɵɵtext(107, \"Freelancer\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(108, \"option\", 17);\n          i0.ɵɵtext(109, \"Job Seeker\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(110, LoginComponent_div_110_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(111, \"div\", 34)(112, \"div\", 50)(113, \"div\", 51);\n          i0.ɵɵelement(114, \"input\", 52);\n          i0.ɵɵelementStart(115, \"b\")(116, \"label\", 53);\n          i0.ɵɵtext(117, \" Agree to terms and conditions \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(118, \"div\", 54);\n          i0.ɵɵtext(119, \" Please agree to our terms. \");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(120, \"div\", 55);\n          i0.ɵɵelement(121, \"div\", 56);\n          i0.ɵɵelementStart(122, \"div\", 56)(123, \"button\", 57);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_123_listener() {\n            return ctx.createUser();\n          });\n          i0.ɵɵtext(124, \"Create User\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(125, \"div\", 56);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(126, \"div\", 58)(127, \"button\", 59);\n          i0.ɵɵtext(128, \"Close\");\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelement(129, \"div\", 2);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"formGroup\", ctx.loginForm)(\"ngClass\", i0.ɵɵpureFunction1(11, _c0, ctx.loginFormSubmitAttempt));\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoginFieldInvalid(\"loginId\"));\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoginFieldInvalid(\"password\"));\n          i0.ɵɵadvance(16);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoginFieldInvalid(\"role\"));\n          i0.ɵɵadvance(28);\n          i0.ɵɵproperty(\"formGroup\", ctx.signUpForm);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSignUpFieldInvalid(\"firstName\"));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSignUpFieldInvalid(\"lastName\"));\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSignUpFieldInvalid(\"userName\"));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSignUpFieldInvalid(\"password\"));\n          i0.ɵɵadvance(17);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSignUpFieldInvalid(\"role\"));\n        }\n      },\n      dependencies: [i6.NgClass, i6.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName]\n    });\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}