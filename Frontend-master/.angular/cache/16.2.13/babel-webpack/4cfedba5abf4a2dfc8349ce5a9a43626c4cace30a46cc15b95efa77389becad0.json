{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Admin } from 'src/app/services/admin.service';\nimport { Freelancer } from 'src/app/services/freelancer.service';\nimport { Recruiter } from 'src/app/services/recruiter.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/admin.service\";\nimport * as i3 from \"src/app/services/recruiter.service\";\nimport * as i4 from \"src/app/services/freelancer.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nfunction LoginComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53);\n    i0.ɵɵtext(1, \" Please enter a userName. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53);\n    i0.ɵɵtext(1, \" Please enter a password. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53);\n    i0.ɵɵtext(1, \" Please choose a valid role. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53);\n    i0.ɵɵtext(1, \" Enter a First Name. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_75_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53);\n    i0.ɵɵtext(1, \" Enter a Last Name. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_85_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53);\n    i0.ɵɵtext(1, \" Enter a UserName. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_91_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53);\n    i0.ɵɵtext(1, \" Enter a Password. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_106_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53);\n    i0.ɵɵtext(1, \" Please choose a valid role. \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"was-validated\": a0\n  };\n};\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(formBuilder, adminService, recruiterService, freelancerService, router) {\n      this.formBuilder = formBuilder;\n      this.adminService = adminService;\n      this.recruiterService = recruiterService;\n      this.freelancerService = freelancerService;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.loginForm = this.formBuilder.group({\n        loginId: ['', Validators.required],\n        role: ['', Validators.required],\n        password: ['', Validators.required]\n      });\n      this.signUpForm = this.formBuilder.group({\n        firstName: ['', Validators.required],\n        lastName: ['', Validators.required],\n        userName: ['', Validators.required],\n        password: ['', Validators.required],\n        role: ['', Validators.required]\n      });\n    }\n    onsubmit() {\n      console.log(\"Login Form Submission attempted\");\n      this.loginFormSubmitAttempt = true;\n      if (this.loginForm.valid) {\n        const role = this.loginForm.get('role').value;\n        const loginId = this.loginForm.get('loginId').value;\n        const password = this.loginForm.get('password').value;\n        //Admin Role\n        if (role === '1') {\n          this.adminService.findByName(loginId).subscribe(data => {\n            console.log(data.userName);\n            if (data.password === password) {\n              alert(\"Logged in Successfully\");\n              this.redirect(\"admin-dashboard\");\n              localStorage.setItem('loggedIn', \"true\");\n            } else {\n              alert(\"Invalid Login Details!\");\n            }\n          }, err => {\n            console.log(err);\n            if (err.status === 400) {\n              alert(err.error);\n            }\n          });\n        }\n        //Recruiter Role\n        else if (role === '2') {\n          this.recruiterService.getByName(loginId).subscribe(data => {\n            console.log(data.userName);\n            if (data.password === password) {\n              alert(\"Logged in Successfully\");\n              // this.recruiterService.setRecruiterId(data.id);\n              // console.log(this.recruiterService.getRecruiterId());\n              localStorage.setItem('recruiterUName', loginId);\n              localStorage.setItem('recruiterId', data.id);\n              this.redirect(\"recruiter-dashboard\");\n              localStorage.setItem('loggedIn', \"true\");\n            } else {\n              alert(\"Invalid Login Details!\");\n            }\n          }, err => {\n            console.log(err);\n            if (err.status === 400) {\n              alert(err.error);\n            }\n          });\n        }\n        //Freelancer Role\n        else if (role === '3') {\n          this.freelancerService.getByUserName(loginId).subscribe(data => {\n            console.log(data.userName);\n            if (data.password === password) {\n              alert(\"Logged in Successfully\");\n              localStorage.setItem('freelancerUName', loginId);\n              localStorage.setItem('freelancerId', data.id);\n              this.freelancerService.setFreelancerId(data.id);\n              this.redirect(\"freelancer-dashboard\");\n              localStorage.setItem('loggedIn', \"true\");\n            } else {\n              alert(\"Invalid Login Details!\");\n            }\n          }, err => {\n            console.log(err);\n            if (err.status === 400) {\n              alert(err.error);\n            }\n          });\n        }\n      }\n    }\n    isSignUpFieldInvalid(field) {\n      return !this.signUpForm.get(field).valid && this.signUpForm.get(field).touched || this.signUpForm.get(field).untouched && this.signUpFormSubmitAttempt;\n    }\n    isLoginFieldInvalid(field) {\n      return !this.loginForm.get(field).valid && this.loginForm.get(field).touched || this.loginForm.get(field).untouched && this.loginFormSubmitAttempt;\n    }\n    createUser() {\n      if (this.signUpForm.valid) {\n        console.log(\"Trying to create a new user\");\n        this.role = this.signUpForm.value.role;\n        console.log(this.role);\n        if (this.role === '1') {\n          console.log(\"Creating new Admin.\");\n          this.admin = new Admin();\n          this.admin.firstName = this.signUpForm.value.firstName;\n          this.admin.lastName = this.signUpForm.value.lastName;\n          this.admin.userName = this.signUpForm.value.userName;\n          this.admin.password = this.signUpForm.value.password;\n          console.log(this.admin);\n          this.adminService.addAdmin(this.admin).subscribe(data => {\n            console.log(data);\n            this.router.navigate(['login']);\n          }, err => {\n            alert(err.error);\n          });\n        } else if (this.role === '2') {\n          console.log(\"Creating new Recruiter\");\n          var recruiter = new Recruiter();\n          recruiter.firstName = this.signUpForm.value.firstName;\n          recruiter.lastName = this.signUpForm.value.lastName;\n          recruiter.userName = this.signUpForm.value.userName;\n          recruiter.password = this.signUpForm.value.password;\n          console.log(recruiter);\n          this.recruiterService.addRecruiter(recruiter).subscribe(data => {\n            console.log(data);\n            this.router.navigate(['/login']);\n          }, err => {\n            alert(err.error);\n          });\n        } else if (this.role === '3') {\n          console.log(\"Creating new Freelancer\");\n          var freelancer = new Freelancer();\n          freelancer.firstName = this.signUpForm.value.firstName;\n          freelancer.lastName = this.signUpForm.value.lastName;\n          freelancer.userName = this.signUpForm.value.userName;\n          freelancer.password = this.signUpForm.value.password;\n          console.log(freelancer);\n          this.freelancerService.addFreelancer(freelancer).subscribe(data => {\n            console.log(data);\n            this.router.navigate(['/login']);\n          }, err => {\n            alert(err.error);\n          });\n        }\n      }\n      this.signUpFormSubmitAttempt = true;\n    }\n    redirect(role) {\n      this.router.navigate([`${role}`]);\n    }\n    static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AdminService), i0.ɵɵdirectiveInject(i3.RecruiterService), i0.ɵɵdirectiveInject(i4.FreelancerService), i0.ɵɵdirectiveInject(i5.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 126,\n      vars: 13,\n      consts: [[1, \"container-fluid\"], [1, \"row\", \"mt-5\"], [1, \"col-3\"], [1, \"col-6\", \"card\", \"shadow-lg\", \"bg-light\", \"bg-gradient\"], [1, \"form\", \"mt-3\", 3, \"formGroup\", \"ngClass\"], [1, \"mb-3\", \"form-group\"], [\"for\", \"loginId\", 1, \"form-label\"], [2, \"color\", \"red\"], [\"type\", \"text\", \"id\", \"loginId\", \"placeholder\", \"userName\", \"formControlName\", \"loginId\", \"required\", \"\", 1, \"form-control\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"passwordField\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"passwordField\", \"placeholder\", \"password\", \"formControlName\", \"password\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"userRole\"], [\"id\", \"userRole\", \"formControlName\", \"role\", \"required\", \"\", 1, \"form-select\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"value\", \"3\"], [1, \"d-grid\", \"gap-2\", \"col-6\", \"mx-auto\", \"mb-1\"], [1, \"row\"], [1, \"col\"], [1, \"col-5\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"click\"], [\"type\", \"reset\", 1, \"btn\", \"btn-dark\"], [1, \"text-center\", \"mb-3\"], [\"href\", \"#\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#signUp\"], [\"id\", \"signUp\", \"data-bs-backdrop\", \"static\", \"data-bs-keyboard\", \"false\", \"tabindex\", \"-1\", \"aria-labelledby\", \"signUpLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"signUpLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [3, \"formGroup\"], [1, \"row\", \"g-3\"], [1, \"col-md-6\"], [\"for\", \"firstName\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"firstName\", \"placeholder\", \"Mark\", \"formControlName\", \"firstName\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"lastName\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"lastName\", \"formControlName\", \"lastName\", \"placeholder\", \"Otto\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"userName\", 1, \"form-label\"], [1, \"input-group\"], [\"id\", \"inputGroupPrepend2\", 1, \"input-group-text\"], [\"type\", \"text\", \"id\", \"userName\", \"aria-describedby\", \"inputGroupPrepend2\", \"formControlName\", \"userName\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"password\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"password\", \"placeholder\", \"Password\", \"formControlName\", \"password\", \"required\", \"\", 1, \"form-control\"], [1, \"col-md-3\"], [\"for\", \"roleSelect\", 1, \"form-label\"], [\"id\", \"roleSelect\", \"formControlName\", \"role\", \"required\", \"\", 1, \"form-select\"], [\"selected\", \"\", \"disabled\", \"\", \"value\", \"\"], [1, \"col-12\"], [1, \"form-check\"], [\"type\", \"checkbox\", \"value\", \"\", \"id\", \"checkTerms\", \"required\", \"\", 1, \"form-check-input\"], [\"for\", \"checkTerms\", 1, \"form-check-label\"], [1, \"invalid-feedback\"], [1, \"row\", \"g-3\", \"mt-2\"], [1, \"col-4\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵelement(2, \"div\", 2);\n          i0.ɵɵelementStart(3, \"div\", 3)(4, \"form\", 4)(5, \"div\", 5)(6, \"b\")(7, \"label\", 6);\n          i0.ɵɵtext(8, \"UserName\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"span\", 7);\n          i0.ɵɵtext(10, \"*\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(11, \"input\", 8);\n          i0.ɵɵtemplate(12, LoginComponent_div_12_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"div\", 5)(14, \"b\")(15, \"label\", 10);\n          i0.ɵɵtext(16, \"Password\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"span\", 7);\n          i0.ɵɵtext(18, \"*\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"input\", 11);\n          i0.ɵɵtemplate(20, LoginComponent_div_20_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 5)(22, \"b\")(23, \"label\", 12);\n          i0.ɵɵtext(24, \"Select Role\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(25, \"span\", 7);\n          i0.ɵɵtext(26, \"*\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"select\", 13)(28, \"option\", 14);\n          i0.ɵɵtext(29, \"Admin\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"option\", 15);\n          i0.ɵɵtext(31, \"Recruiter\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"option\", 16);\n          i0.ɵɵtext(33, \"Freelancer\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(34, LoginComponent_div_34_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"div\", 17)(36, \"div\", 18);\n          i0.ɵɵelement(37, \"div\", 19);\n          i0.ɵɵelementStart(38, \"div\", 20)(39, \"button\", 21);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_39_listener() {\n            return ctx.onsubmit();\n          });\n          i0.ɵɵtext(40, \"Login\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(41, \"div\", 20)(42, \"button\", 22);\n          i0.ɵɵtext(43, \"Reset\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(44, \"div\", 19);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(45, \"div\", 23)(46, \"small\");\n          i0.ɵɵtext(47, \"Not a user yet?\");\n          i0.ɵɵelementStart(48, \"span\");\n          i0.ɵɵtext(49, \" Click here to \");\n          i0.ɵɵelementStart(50, \"a\", 24);\n          i0.ɵɵtext(51, \"Sign Up\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(52, \".\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(53, \"div\")(54, \"div\", 25)(55, \"div\", 26)(56, \"div\", 27)(57, \"div\", 28)(58, \"h5\", 29);\n          i0.ɵɵtext(59, \"Sign Up\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(60, \"button\", 30);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(61, \"div\", 31)(62, \"form\", 32)(63, \"div\", 33)(64, \"div\", 34)(65, \"b\")(66, \"label\", 35);\n          i0.ɵɵtext(67, \"First name\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(68, \"input\", 36);\n          i0.ɵɵtemplate(69, LoginComponent_div_69_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(70, \"div\", 34)(71, \"b\")(72, \"label\", 37);\n          i0.ɵɵtext(73, \"Last name\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(74, \"input\", 38);\n          i0.ɵɵtemplate(75, LoginComponent_div_75_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(76, \"div\", 33)(77, \"div\", 34)(78, \"b\")(79, \"label\", 39);\n          i0.ɵɵtext(80, \"Username\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(81, \"div\", 40)(82, \"span\", 41);\n          i0.ɵɵtext(83, \"@\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(84, \"input\", 42);\n          i0.ɵɵtemplate(85, LoginComponent_div_85_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(86, \"div\", 34)(87, \"b\")(88, \"label\", 43);\n          i0.ɵɵtext(89, \"Password\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(90, \"input\", 44);\n          i0.ɵɵtemplate(91, LoginComponent_div_91_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(92, \"div\", 33)(93, \"div\", 45)(94, \"b\")(95, \"label\", 46);\n          i0.ɵɵtext(96, \"Role\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(97, \"select\", 47)(98, \"option\", 48);\n          i0.ɵɵtext(99, \"Choose Role\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(100, \"option\", 14);\n          i0.ɵɵtext(101, \"Admin\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(102, \"option\", 15);\n          i0.ɵɵtext(103, \"Recruiter\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(104, \"option\", 16);\n          i0.ɵɵtext(105, \"Freelancer\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(106, LoginComponent_div_106_Template, 2, 0, \"div\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(107, \"div\", 33)(108, \"div\", 49)(109, \"div\", 50);\n          i0.ɵɵelement(110, \"input\", 51);\n          i0.ɵɵelementStart(111, \"b\")(112, \"label\", 52);\n          i0.ɵɵtext(113, \" Agree to terms and conditions \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(114, \"div\", 53);\n          i0.ɵɵtext(115, \" Please agree to our terms. \");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(116, \"div\", 54);\n          i0.ɵɵelement(117, \"div\", 55);\n          i0.ɵɵelementStart(118, \"div\", 55)(119, \"button\", 56);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_119_listener() {\n            return ctx.createUser();\n          });\n          i0.ɵɵtext(120, \"Create User\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(121, \"div\", 55);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(122, \"div\", 57)(123, \"button\", 58);\n          i0.ɵɵtext(124, \"Close\");\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelement(125, \"div\", 2);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"formGroup\", ctx.loginForm)(\"ngClass\", i0.ɵɵpureFunction1(11, _c0, ctx.loginFormSubmitAttempt));\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoginFieldInvalid(\"loginId\"));\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoginFieldInvalid(\"password\"));\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoginFieldInvalid(\"role\"));\n          i0.ɵɵadvance(28);\n          i0.ɵɵproperty(\"formGroup\", ctx.signUpForm);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSignUpFieldInvalid(\"firstName\"));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSignUpFieldInvalid(\"lastName\"));\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSignUpFieldInvalid(\"userName\"));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSignUpFieldInvalid(\"password\"));\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSignUpFieldInvalid(\"role\"));\n        }\n      },\n      dependencies: [i6.NgClass, i6.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName]\n    });\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}